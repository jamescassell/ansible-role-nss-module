---
# vars file for nss-module

nss_module_lib_info: >-
  {{ nss_module_probe.stdout.split('\n\n'.decode('string_escape'))
  | map('regex_search', nss_module_re_module_lib, multiline=True, groupdict=True)
  | select('mapping') | list }}

nss_module_re_module_lib: >-
  (?s)^ ? ?[0-9]+\. (?P<module>.*?)$.*?$\s+library name: (?P<lib>.*?)$

nss_module_echo_check: "{{ ansible_check_mode | ternary('echo ', '') }}"
